import{r,S as y,C as k,a as c,b as h,M as b,c as v,U as T,P as D,j as e,A as I}from"./app.js";import{P as w,U as N,Z as P}from"./zap.js";const E={mode:"default",basePrices:{},types:[{id:"service",label:"Web de Servicios",desc:"Para clínicas, abogados, reformas...",icon:w,price:900},{id:"ecommerce",label:"Tienda / Catálogo",desc:"Venta online o catálogo B2B.",icon:c,price:1800}],features:[{id:"seo",label:"SEO Local Pack",desc:"Posicionamiento en Google (León).",price:400,icon:y},{id:"writing",label:"Redacción Profesional",desc:"Textos persuasivos (Copywriting).",price:300,icon:w},{id:"booking",label:"Reservas / Cita Previa",desc:"Calendario sincronizado.",price:600,icon:k}]},A={"printing-niche":{types:[{id:"printing_basic",label:"Web Imprenta Básica",desc:"Recepción de archivos y contacto.",icon:D,price:1200},{id:"printing_pro",label:"Imprenta Online Pro",desc:"Calculadora de precios en tiempo real.",icon:c,price:2500}],features:[{id:"upload",label:"Subida Archivos Pesados",desc:"Integración nube para evitar correos.",price:300,icon:N,highlight:!0},{id:"seo",label:"SEO Local Imprentas",desc:"Posicionamiento en León.",price:400,icon:b},{id:"crm",label:"Área Cliente / Estado",desc:"Seguimiento de pedidos.",price:800,icon:v}]},"restaurant-focus":{types:[{id:"restaurant_qr",label:"Carta Digital QR",desc:"Menú interactivo y alérgenos.",icon:T,price:800},{id:"restaurant_full",label:"Web Restaurante Pro",desc:"Reservas y pedidos online.",icon:c,price:2e3}],features:[{id:"booking",label:"Motor de Reservas",desc:"Sin comisiones por cubierto.",price:500,icon:k,highlight:!0},{id:"photo",label:"Sesión Fotográfica",desc:"Fotos profesionales de platos.",price:300,icon:N},{id:"seo",label:"SEO Gastronómico",desc:'Aparece en "Dónde comer León".',price:450,icon:y}]},"local-shop-focus":{types:[{id:"shop_catalog",label:"Catálogo Click & Collect",desc:"Reservar online, pagar en tienda.",icon:c,price:1100},{id:"shop_full",label:"E-commerce Completo",desc:"Envíos a toda España + Pasarela.",icon:c,price:2200}],features:[{id:"whatsapp",label:"Pedidos por WhatsApp",desc:"Botón directo de pedido.",price:150,icon:h,highlight:!0},{id:"seo",label:"SEO Comercio Local",desc:"Ficha Google Maps optimizada.",price:400,icon:b},{id:"loyalty",label:"Fidelización",desc:"Sistema de puntos básico.",price:600,icon:P}]},"performance-focus":{types:[{id:"wpo_audit",label:"Auditoría WPO Rápida",desc:"Informe y arreglos básicos.",icon:P,price:400},{id:"wpo_full",label:"Optimización Completa",desc:"Migración a React + Caché.",icon:v,price:1500}],features:[{id:"hosting",label:"Hosting NVMe León",desc:"Migración a servidor rápido.",price:200,icon:v},{id:"webp",label:"Conversión WebP",desc:"Optimización de imágenes.",price:150,icon:N},{id:"cdn",label:"CDN Global",desc:"Carga rápida desde cualquier lugar.",price:300,icon:b}]},"local-seo-focus":{types:[{id:"service",label:"Web SEO Local",desc:"Optimizada para Google Maps.",icon:b,price:1e3},{id:"ecommerce",label:"Tienda SEO",desc:"E-commerce con estructura SEO.",icon:c,price:1900}],features:[{id:"seo",label:"Pack SEO Mensual",desc:"3 primeros meses incluidos.",price:900,icon:y,highlight:!0},{id:"reviews",label:"Gestión Reseñas",desc:"Estrategia para ganar estrellas.",price:200,icon:h},{id:"content",label:"Blog Local",desc:"4 artículos sobre León.",price:400,icon:w}]}},z=()=>{const[i,O]=r.useState(E),[m,p]=r.useState(1),[g,_]=r.useState(null),[f,R]=r.useState([]),[o,C]=r.useState({name:"",email:""}),[j,u]=r.useState("idle");r.useEffect(()=>{var t;const s=(t=window.empcData)==null?void 0:t.postConfig;if(s&&s.island_data&&s.island_data.calculator_mode){const a=s.island_data.calculator_mode,l=A[a];l&&(O({...E,...l,mode:a}),console.log("BudgetCalculator: Mode switched to",a))}},[]);const F=s=>{R(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},n=(()=>{let s=0;const t=i.types.find(a=>a.id===g);return t&&(s+=t.price),f.forEach(a=>{const l=i.features.find(x=>x.id===a);l&&(s+=l.price)}),{min:s,max:Math.round(s*1.25/10)*10}})(),L=async s=>{var l,x,S;s.preventDefault(),u("submitting");const t=((l=i.types.find(d=>d.id===g))==null?void 0:l.label)||g,a={name:o.name,email:o.email,budget_data:{type:t,features:f,estimated_range:n,mode:i.mode}};try{const d=((x=window.empcData)==null?void 0:x.restUrl)+"empc/v1/budget",M=(S=window.empcData)==null?void 0:S.nonce;(await fetch(d,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":M},body:JSON.stringify(a)})).ok?u("success"):u("error")}catch(d){console.error(d),u("error")}};return j==="success"?e.jsxs("div",{className:"bg-emerald-900/50 p-8 rounded-xl border border-emerald-500/30 text-center animate-fade-in",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(h,{className:"w-8 h-8 text-emerald-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"¡Presupuesto Enviado!"}),e.jsxs("p",{className:"text-emerald-200 mb-6",children:["Hemos enviado los detalles a ",e.jsx("strong",{children:o.email}),"."]}),e.jsxs("div",{className:"text-white bg-slate-800 p-4 rounded-lg inline-block",children:[e.jsx("span",{className:"text-slate-300 text-sm block",children:"Tu rango estimado"}),e.jsxs("span",{className:"text-3xl font-bold text-emerald-400",children:[n.min,"€ - ",n.max,"€"]})]})]}):e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-md rounded-xl p-6 md:p-8 border border-slate-700 shadow-2xl relative overflow-hidden transition-all duration-500",children:[i.mode!=="default"&&e.jsxs("div",{className:"absolute top-0 right-0 bg-rose-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg",children:["Modo: ",i.mode.replace(/-/g," ").toUpperCase()]}),e.jsx("div",{className:"flex gap-2 mb-8 mt-2",children:[1,2,3].map(s=>e.jsx("div",{className:`h-1 flex-1 rounded-full transition-all ${m>=s?"bg-rose-500":"bg-slate-700"}`},s))}),m===1&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("h3",{className:"text-xl font-bold text-white text-center",children:"¿Qué necesitas implementar?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.types.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>{_(s.id),p(2)},className:"p-6 rounded-xl border border-slate-700 bg-slate-800/50 hover:border-rose-500 hover:bg-slate-800 transition-all text-left group",children:[e.jsx("div",{className:"bg-rose-500/10 w-12 h-12 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:e.jsx(t,{className:"text-rose-500"})}),e.jsx("h4",{className:"font-bold text-white mb-1",children:s.label}),e.jsx("p",{className:"text-sm text-slate-300",children:s.desc}),e.jsxs("div",{className:"mt-3 text-xs font-bold text-rose-400",children:["Desde ",s.price,"€"]})]},s.id)})})]}),m===2&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("h3",{className:"text-xl font-bold text-white text-center",children:"Funcionalidades Específicas"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:i.features.map(s=>{const t=s.icon,a=f.includes(s.id);return e.jsxs("label",{className:`flex items-center p-4 rounded-lg border cursor-pointer transition-all ${a?"border-rose-500 bg-rose-500/10":"border-slate-700 hover:bg-slate-800"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",checked:a,onChange:()=>F(s.id)}),e.jsx("div",{className:"mr-3",children:e.jsx(t,{className:a?"text-rose-400":"text-slate-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"text-white font-medium block",children:[s.label,s.highlight&&e.jsx("span",{className:"ml-2 text-[10px] bg-rose-600/20 text-rose-300 px-2 py-0.5 rounded-full",children:"Recomendado"})]}),e.jsx("span",{className:"text-xs text-slate-300",children:s.desc})]}),e.jsxs("div",{className:"text-sm font-bold text-slate-300 mr-2",children:["+",s.price,"€"]}),a&&e.jsx(h,{className:"text-rose-500 w-5 h-5"})]},s.id)})}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{onClick:()=>p(1),className:"text-slate-300 hover:text-white transition-colors",children:"Atrás"}),e.jsxs("button",{onClick:()=>p(3),className:"bg-white text-slate-900 px-6 py-2 rounded-lg font-bold hover:bg-slate-200 transition-colors flex items-center",children:["Ver Estimación ",e.jsx(I,{className:"inline w-4 h-4 ml-1"})]})]})]}),m===3&&e.jsxs("div",{className:"text-center animate-fade-in space-y-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300 text-sm uppercase tracking-wider",children:"Inversión Estimada (León)"}),e.jsxs("div",{className:"text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-rose-400 to-orange-400 my-2",children:[n.min,"€ - ",n.max,"€"]}),e.jsx("p",{className:"text-slate-300 text-sm max-w-xs mx-auto",children:"IVA no incluido. Presupuesto válido por 15 días."})]}),e.jsxs("form",{onSubmit:L,className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700 text-left",children:[e.jsx("h4",{className:"text-white font-bold mb-4",children:"¿Quieres esta propuesta en PDF?"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bc-name",className:"block text-sm font-medium text-slate-300 mb-1",children:"Nombre"}),e.jsx("input",{id:"bc-name",type:"text",required:!0,className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-rose-500 focus:outline-none placeholder-slate-500",placeholder:"Tu Nombre o Empresa",value:o.name,onChange:s=>C({...o,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bc-email",className:"block text-sm font-medium text-slate-300 mb-1",children:"Email"}),e.jsx("input",{id:"bc-email",type:"email",required:!0,className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-rose-500 focus:outline-none placeholder-slate-500",placeholder:"Email Profesional",value:o.email,onChange:s=>C({...o,email:s.target.value})})]}),e.jsx("button",{type:"submit",disabled:j==="submitting",className:"w-full bg-rose-600 hover:bg-rose-500 text-white font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:j==="submitting"?"Procesando...":"Recibir Propuesta Detallada"})]})]}),e.jsx("button",{onClick:()=>p(2),className:"text-slate-500 hover:text-white text-sm",children:"Volver a editar configuración"})]})]})};export{z as default};
